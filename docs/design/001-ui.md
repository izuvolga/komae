# User Interface

##  Overview

本ソフトウェアはおおきく3つのウィンドウで構成されている。
- Asset Window
- Spread Sheet
- Preview Window

それぞれの Window の境界はドラッグアンドドロップで大きさを調整できる。
また、 Preview Window は別ウィンドウとして開くこともできる。

```
   ┌────────────────────────────────────────────┬──────────────────────────────────────────┐
   │                                            │                                          │
   │                                            │                                          │
   │                 Asset Window               │                                          │
   │                                            │                                          │
   │                                           ◄┼►                                         │
   │                                            │                                          │
   │                                            │            Preview Window                │
   │                    ▲                       │                                          │
   ├────────────────────┼───────────────────────┤                                          │
   │                    ▼                       │                                          │
   │                                            │                                          │
   │        Spread Sheet Window                 │                                          │
   │                                            │                                          │
   │                                            │                                          │
   │                                            │                                          │
   │                                            │                                          │
   │                                            │                                          │
   └────────────────────────────────────────────┘──────────────────────────────────────────┘
```

Created by [Ascii Flow](https://asciiflow.com/#/)

さらに、OS 提供のメニューバーが存在し、そこから新規プロジェクトの作成や、プロジェクトの保存、エクスポートなどを行うことができる。

- File
  - New Project
  - Open Project
  - Save Project
  - Export Project
    - Export to PNG
    - Export to HTML
- Edit
  - Undo
  - Redo
  - Cut
  - Copy
  - Paste
- Help
  - About
  - Documentation
  - Check for Updates

## Asset Window

  - AssetTemplate を管理する場所箇所。entity.md参照。
  - 画像ファイルをドラッグアンドドロップしたり、メニューバーから新規作成したりすることで AssetTemplate を追加することができる。
  - AssetTemplate のアイコンは以下の様になる
    - ImageAssetTemplate ... 登録されている画像を縮小したもの
    - ImageGroupAssetTemplate ... グループの中で一番上の画像が縮小され、少し斜めに配置され、背景に別の画像も微妙に見える
    - TextAssetTemplate ... 「T」の文字が書かれたアイコン

```
    ┌───────────────────────────────────────────────────────┐
    │                                                       │
    │   ┌───────────┐    ┌───────────┐    ┌───────────┐     │
    │   │           │    │           │    │           │     │
    │   │           │    │           │    │           │     │
    │   │ Asset1    │    │ Asset2    │    │  Asset3   │     │
    │   │           │    │           │    │           │     │
    │   │           │    │           │    │           │     │
    │   │           │    │           │    │           │     │
    │   └───────────┘    └───────────┘    └───────────┘     │
    │                                                       │
    │                                                       │
    │   ┌───────────┐   ┌───────────┐     ┌───────────┐     │
    │   │           │   │           │     │           │     │
    │   │           │   │           │     │           │     │
    │   │ Asset4    │   │ Asset5    │     │  Asset6   │     │
    │   │           │   │           │     │           │     │
    │   │           │   │           │     │           │     │
    │   │           │   │           │     │           │     │
    │   └───────────┘   └───────────┘     └───────────┘     │
    │                                                       │
    │                                                       │
    └───────────────────────────────────────────────────────┘
```

### Asset Management

それぞれのアセットは、種類ごとに異なる特性を持つ。
Asset Window 上でダブルクリックすることで、画面全体がアセットの編集ウィンドウに切り替わる。

#### ImageAssetTemplate

最も本ソフトウェアで利用されるであろうアセット
Asset Window で画像ファイルをドラッグアンドドロップすることで作成される。
さらに Asset Window 上でクリックすると、詳細を編集するウィンドウが開く。
以下のような感じ。

```
      ┌─────────────────────────────────────────────────────────────┐
      │                                        width   height       │
      │    ┌─────────────────────┐            ┌───────┐┌───────┐    │
      │    │                     │            │       ││       │ [v]│ --- SizeAssetAttr     
      │    │                     │            └───────┘└───────┘    │
      │    │                     │             PosX    PosY         │
      │    │                     │            ┌───────┐┌───────┐    │
      │    │                     │            │       ││       │ [v]│ --- PositionAssetAttr     
      │    │    Image Preview    │            └───────┘└───────┘    │
      │    │                     │             Opacity              │      
      │    │                     │            ┌───────┐             │
      │    │                     │            │       │             │
      │    │                     │            └───────┘             │
      │    └─────────────────────┘      ...                         │      
      │                                                             │      
      └─────────────────────────────────────────────────────────────┘      
```

Image Preview は、デフォルトのキャンパスサイズの枠の仲に、
AssetTemplate の画像を表示するための領域で、画像の大きさや位置を確認することができる。
マウス操作で画像の位置や大きさを変更することができる。
また、横には画像の位置や大きさを変更するためのテキストボックスがあり、実際に数値を入力することで、画像の位置や大きさを変更することができる。
また、上記の`[v]`の部分をクリックすることで、ドロップダウンメニューが表示され、AssetAttr を選択することができる。
AssetAttr の名前は、ImageAssetTemplate の名前と同じである。また、AssetAttr を専用で編集する UI 画面はない。

#### ImageGroupAsset

TODO

## Spread Sheet Window

本ソフトウェアの特徴的な特性は、複数 Page での横断編集が極めて容易であること。
- UI 上の Spread Sheet には、Microsoft Exce のような格子状の表形式のエディタがあり、複数の Page にまたがる AssetInstance の情報を編集することができる。
- それぞれの行は Page を表し、列は AssetTemplate を表す。
- ある Page で特定の AssetInstance を作成した場合、セルに元となった AssetTemplate の列が表示される。
- 例えば
  - Asset Window に画像ファイルをドロップして、「My Girl」という AssetTemplate を作成
  - 「My Girl」をSpread Sheet にドロップする
  - すると、My Girl の列が Spread Sheet に追加される。
  - 各セルにはチェックボックスが表示され、チェックを入れることで AssetInstance を Page 上に配置することができる。
  - また、チェックボックス以外の場所をクリックすることで、AssetInstance の位置やサイズを変更するためのウィンドウがモーダルとして表示される
  - 列のタイトルをクリックすることで、Excel のように、列全体を選択することができる
  - 列のタイトルを右クリックすることで、非表示にすることができる。例えば背景画像など、常に表示して編集する必要がない場合は、非表示にしておくことができる。
  - 列をドラッグすることで、列の順番を変更することができる。

```
                 My Girl         Background      Girls Speech    Effect
                ┌───────────────┌───────────────┬───────────────┌───────────────┐
        Page1   │ [x]           │ [x]           │ [x]           │ [x]           │
                ├───────────────├───────────────┼───────────────├───────────────┤
        Page2   │ [x]           │ [x]           │ [x]           │ [x]           │
                ├───────────────├───────────────┼───────────────├───────────────┤
        Page3   │ [x]           │ [x]           │ [x]           │ [x]           │
                ├───────────────├───────────────┼───────────────├───────────────┤
        Page4   │ [x]           │ [x]           │ [x]           │ [x]           │
                └───────────────└───────────────┴───────────────└───────────────┘
```


## Preview Window

  - Page の内容を確認するためのウィンドウ。Page がどのように見えるかを確認することができる。
  - Preview Window は、複数ページを横断的に確認できる。
  - ⌘ + マウスホイールで page の大きさが変更できる。

```
   ┌─────────────────────────────────────────────────────────────┐
   │                                                          ┌─┐│
   │   ┌──────────────┐   ┌──────────────┐  ┌──────────────┐  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │   page1      │   │   page2      │  │   page3      │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   └──────────────┘   └──────────────┘  └──────────────┘  │ ││
   │                                                          │ ││
   │                                                          │ ││
   │   ┌──────────────┐   ┌──────────────┐  ┌──────────────┐  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │   page4      │   │  page5       │  │   page6      │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ││
   │   │              │   │              │  │              │  │ ┼┼─────┐
   │   │              │   │              │  │              │  │ ││     │
   │   └──────────────┘   └──────────────┘  └──────────────┘  │ ││   scroll bar
   │                         ...                              │ ││
   │                                                          └─┘│
   └─────────────────────────────────────────────────────────────┘
```
