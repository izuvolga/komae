# エクスポート先ディレクトリ構造仕様

## 概要

Komaeプロジェクトのエクスポート機能における、出力ファイル・ディレクトリ構造の仕様を定義する。

## 対応エクスポート形式

### 1. HTML形式

**出力形式**: 単一HTMLファイル

```
プロジェクト名.html
```

**特徴**:
- 画像アセット: Base64エンコードでHTML内に埋め込み
- フォント: Base64エンコードでHTML内に埋め込み
- 外部依存ファイル: なし（完全な単一ファイル）
- ディレクトリ構造: 不要

**実装要件**:
- `outputPath`で指定されたディレクトリに単一HTMLファイルを出力
- 親ディレクトリが存在しない場合は作成
- 既存ファイルの上書き確認

### 2. PNG形式

**出力形式**: ディレクトリ + 複数PNGファイル

```
プロジェクト名/
├── 1.png
├── 2.png
├── 3.png
├── 4.png
⋮
```

**特徴**:
- 各ページが個別のPNGファイルとして出力
- ファイル名は連番（1.png, 2.png, ...）
- プロジェクト名のディレクトリ内に格納

**実装要件**:
- `outputPath`配下に`プロジェクト名`ディレクトリを作成
- 既存ディレクトリの上書き確認
- ページ数に応じたPNGファイルの出力

### 3. SVG形式

**対応**: 当フェーズでは実装対象外

## ディレクトリ構造作成の責務

### HTML形式の場合
- 出力ファイルの親ディレクトリ存在確認・作成
- 既存ファイルの上書き確認

### PNG形式の場合
- プロジェクト名ディレクトリの作成
- 既存ディレクトリの上書き確認・クリーンアップ
- ページファイル出力先の準備

## エラーハンドリング

### 共通
- 出力パスの妥当性検証
- ファイルシステム権限エラーの適切な処理
- 既存ファイル・ディレクトリとの競合処理

### HTML形式固有
- 親ディレクトリ作成失敗時のエラー処理

### PNG形式固有
- ディレクトリ作成失敗時のエラー処理
- 既存ファイルの削除失敗時のエラー処理

## 実装方針

### シンプル性の重視
- 複雑なディレクトリ構造は避ける
- Base64埋め込みによる外部依存の排除（HTML）
- 直感的なファイル命名（PNG）

### 拡張性の考慮
- 将来のSVG形式対応に備えた設計
- エクスポート設定（ExportOptions）との連携
- 他のエクスポート形式への拡張可能性

## 関連ファイル

- `src/utils/exportSettings.ts`: エクスポート設定管理
- `src/utils/htmlExporter.ts`: HTML生成機能
- `src/utils/exportDirectory.ts`: ディレクトリ構造作成（実装予定）