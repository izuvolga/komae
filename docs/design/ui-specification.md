# User Interface

##  Overview

本ソフトウェアは3つのパネルで構成されている。
- Asset Library（左パネル）
- Spread Sheet（中央パネル）
- Preview Window（右パネル）

各パネルは表示/非表示を切り替えることができ、動的なレイアウト調整により効率的な作業スペースを提供する。

### 基本レイアウト（全パネル表示）
```
   ┌─────────────────┬──────────────────────────────┬─────────────────┐
   │ [◄] Asset       │        Project Name          │    Preview [►]  │
   │                 ├──────────────────────────────┤                 │
   │                 │                              │                 │
   │  Asset Library  │       Spread Sheet           │  Preview Window │
   │                 │                              │                 │
   │                 │                              │                 │
   │                 │                              │                 │
   │                 │                              │                 │
   │                 │                              │                 │
   │                 │                              │                 │
   │                 │                              │                 │
   │                 │                              │                 │
   │                 │                              │                 │
   └─────────────────┴──────────────────────────────┴─────────────────┘
```

### 片方非表示レイアウト
```
   ┌─────────────────────────────────────────────┬─────────────────┐
   │ [◄]             Project Name                │    Preview [►]  │
   │                                             ├─────────────────┤
   │                                             │                 │
   │            Spread Sheet                     │  Preview Window │
   │                                             │                 │
   │                                             │                 │
   │                                             │                 │
   │                                             │                 │
   │                                             │                 │
   │                                             │                 │
   │                                             │                 │
   │                                             │                 │
   └─────────────────────────────────────────────┴─────────────────┘
```

### フルスクリーンレイアウト（両パネル非表示）
```
   ┌─────────────────────────────────────────────────────────────┐
   │ [◄]             Project Name                         [►]    │
   ├─────────────────────────────────────────────────────────────┤
   │                                                             │
   │                     Spread Sheet                            │
   │                                                             │
   │                                                             │
   │                                                             │
   │                                                             │
   │                                                             │
   │                                                             │
   │                                                             │
   │                                                             │
   └─────────────────────────────────────────────────────────────┘
```

Created by [Ascii Flow](https://asciiflow.com/#/)

さらに、OS 提供のメニューバーが存在し、そこから新規プロジェクトの作成や、プロジェクトの保存、エクスポートなどを行うことができる。

- File
  - New Project
  - Open Project
  - Save Project
  - Export Project
    - Export to PNG
    - Export to HTML
- Edit
  - Undo
  - Redo
  - Cut
  - Copy
  - Paste
- Help
  - About
  - Documentation
  - Check for Updates

## Panel Toggle System

### Dynamic Button Positioning

各パネルの表示切り替えボタンは、表示状態に応じて動的に位置を変更する：

#### Asset Library Toggle
- **閉じるボタン**：アセットライブラリ内のヘッダー左側
- **開くボタン**：中央パネルのツールバー左側（プロジェクト名の左）

#### Preview Window Toggle  
- **閉じるボタン**：プレビューウィンドウ内のヘッダー右側
- **開くボタン**：中央パネルのツールバー右側（プロジェクト名の右）

### SVG Icons

パネル切り替えボタンには、以下のSVGアイコンを使用：
- `PanelCollapseLeftIcon`：アセットライブラリ閉じるボタン
- `PanelExpandLeftIcon`：アセットライブラリ開くボタン  
- `PanelCollapseRightIcon`：プレビューウィンドウ閉じるボタン
- `PanelExpandRightIcon`：プレビューウィンドウ開くボタン
- `FitToViewIcon`：プレビューウィンドウのフィット表示ボタン

アイコンは`currentColor`を使用してテーマ一貫性を保ち、ホバー効果にも対応している。

## Asset Window

  - Asset（テンプレート）を管理する場所。entity.md参照。
  - 画像ファイルをドラッグアンドドロップしたり、メニューバーから新規作成したりすることで Asset を追加することができる。
  - Asset のアイコンは以下の様になる
    - ImageAsset ... 登録されている画像を縮小したもの
    - TextAsset ... 「T」の文字が書かれたアイコン
  - パネルの表示/非表示切り替えボタンを備えている
  - **縦スクロール機能**：多数のアセットがある場合は自動的に縦スクロールバーが表示される

```
    ┌───────────────────┐
    │                   │
    │   ┌───────────┐   │
    │   │ Asset 1   │   │
    │   └───────────┘   │
    │   ┌───────────┐   │
    │   │ Asset 2   │   │
    │   └───────────┘   │ 
    │   ┌───────────┐   │
    │   │ Asset 3   │   │
    │   └───────────┘   │
    │   ┌───────────┐   │
    │   │ Asset 4   │   │
    │   └───────────┘   │
    │   ┌───────────┐   │
    │   │ Asset 5   │   │
    │   └───────────┘   │
    │       ...         │
    └───────────────────┘
```

### Asset Management

それぞれのアセットは、種類ごとに異なる特性を持つ。
Asset Window 上でダブルクリックすることで、画面全体がアセットの編集ウィンドウに切り替わる。

#### ImageAsset

最も本ソフトウェアで利用されるであろうアセット
Asset Window で画像ファイルをドラッグアンドドロップすることで作成される。
さらに Asset Window 上でダブルクリック、あるいは右クリックからメニューを出して「Edit」を選ぶと、詳細を編集するウィンドウが開く。以下のような感じ。

```
      ┌─────────────────────────────────────────────────────────────┐
      │                                                             │
      │                                   Asset Name                │
      │                                        ┌────────────────┐   │
      │                                        │                │   │
      │                                        └────────────────┘   │
      │    ┌─────────────────────┐        Original Width/Height     │
      │    │    Image Preview    │            ┌───────┐┌───────┐    │
      │    │                     │            │  100  ││   200 │    │
      │    │   o------------o    │            └───────┘└───────┘    │
      │    │   |            |    │        Default Width/Height      │
      │    │   |            |    │      [ ] 縦横比を元画像にあわせる│
      │    │   o------------o    │            ┌───────┐┌───────┐    │
      │    │                     │            │       ││       │    │
      │    │                     │            └───────┘└───────┘    │
      │    │                     │          Default PosX/PosY       │
      │    └─────────────────────┘            ┌───────┐┌───────┐    │
      │                                       │       ││       │    │
      │                                       └───────┘└───────┘    │
      │                                     Default Opacity         │
      │                                       o─[]────────────o     │
      │                                     Edit Mask [🖊️]          │
      └─────────────────────────────────────────────────────────────┘
```

Image Preview のフレームはキャンバスサイズの縦横比率にあわせて表示される。
Original Width/Height はグレーアウトしており、編集できない。
Original Width/Height のテキストボックスは、0以下の値を入力することはできない。
ただ、一時的に編集で空白にできる。が、マウスのフォーカスを外したときにバリデーションがされ、不正な値が入力されている場合は、元の値に戻される。
整数だけではなく、少数第2位までの数字を入力することができる。

Default Width/Height は、編集ができる項目で、ここで指定した値が ImageAsset のデフォルト値として保存される。
Default Width/Height のテキストボックスは、0以下の値を入力することはできるが、数字と`-`と`.`以外の文字は入力することはできない。
整数だけではなく、少数第2位までの数字を入力することができる。
ただ、一時的に編集で空白にできる。が、マウスのフォーカスを外したときにバリデーションがされ、不正な値が入力されている場合は、元の値に戻される。

「[ ] 縦横比を元画像にあわせる」のチェックボックスは、チェックを入れると、Default Width/Height の値を変更した際に、元画像の縦横比を維持するように自動的に計算される。Default PosX/PosY は、画像のデフォルトの位置を指定する項目で、ここで指定した値が ImageAsset のデフォルト値として保存される。

以下の領域は、マウスでのドラッグ操作で、画像の位置や大きさを変更することができる。
`o` の箇所はドラッグ可能なハンドルで、画像の位置や大きさを変更することができる。
実際に`o`の箇所は、画面上では四角形の図形として表示される。
この`o`の箇所をドラッグする最中に Shift キーを押すと、その時点のサイズの縦横比を維持したまま大きさを変更することができる。
矩形の内側は ImageAsset の画像が表示される領域で、画像の大きさや位置を確認することができる。
さらに矩形の内側自体もドラッグ可能で、画像の位置を変更することができる。

```
o------------o
|            |
|            |
o------------o
```

ペンのマークをクリックすると、下のマスク編集画面が開く。

マスク編集:
```
      ┌───────────────────────────────────────────────────────────┐
      │                                 Default Mask              │
      │    ┌─────────────────────┐      ┌───────┐      ┌───────┐  │
      │    │    Image Preview    │  P1:x│       │ P1:y │       │  │
      │    │                     │      └───────┘      └───────┘  │
      │    │   0------------0    │      ┌───────┐      ┌───────┐  │
      │    │   |            |    │  P2:x│       │ P2:y │       │  │
      │    │   |            |    │      └───────┘      └───────┘  │
      │    │   0------------0    │      ┌───────┐      ┌───────┐  │
      │    │                     │  P3:x│       │ P3:y │       │  │
      │    │                     │      └───────┘      └───────┘  │
      │    │                     │      ┌───────┐      ┌───────┐  │
      │    └─────────────────────┘  P4:x│       │ P4:y │       │  │
      │                                 └───────┘      └───────┘  │
      │                                                           │
      │                                Exit Mask Editor [<-]      │
      │                                                           │
      └───────────────────────────────────────────────────────────┘
```

マスク編集画面では、マスク領域を矩形で指定できる。
「Exit Mask Editor」をクリックすると、元の ImageAsset 編集画面に戻る。
それぞれの座標のテキストボックスは、0以下の値を入力することはできるが、数字と`-`と`.`以外の文字は入力することはできない。
整数だけではなく、少数第2位までの数字を入力することができる。
ただ、一時的に編集で空白にできる。が、マウスのフォーカスを外したときにバリデーションがされ、不正な値が入力されている場合は、元の値に戻される。

このマスク編集画面では、画像の表示領域を矩形で指定することができる。
マスクの矩形は、4つのポイント（P1, P2, P3, P4）で定義され、それぞれの座標を指定することができる。
`0` の箇所は、マスクの矩形の角を表しており、ドラッグ操作で位置を変更することができる。
この画面を開いた時の P1〜P4 の座標はキャンバスサイズの４点になっている。

```
0------------0
|            |
|            |
0------------0
```

このマスクの編集画面の矩形の範囲にのみ、画像が表示されるようになる。
マスクの編集画面では、上記の矩形の外側の範囲は、薄い白色で表示され、マスクの範囲がわかりやすくなっている。以下のドットが薄い白色の範囲。
`+` で囲まれた部分がImageAssetの画像、`0` で囲まれた部分がマスクの矩形の範囲を表す。
重要なのは、ImageAssetの画像もしっかりと表示されていること。


```
┌───────────────────────────────┐
│...............................│
│...+----------------------+....│
│...|......................|....│
│...|....0------------0....|....│
│...|....|            |....|....│
│...|....|            |....|....│
│...|....0------------0....|....│
│...|......................|....│
│...+----------------------+....│
│...............................│
└───────────────────────────────┘
```

なお、マスクの四隅のデザインは簡略化のために`0`としてたが、
実際には以下のように矩形の内側に内接した四角形のような形状をしていることにする。

```
   ┌─────┐────────────────┌─────┐  
   │     │                │     │  
   └─────┘                └─────┘  
   │                            │  
   │                            │  
   │                            │  
   │                            │  
   │                            │  
   ┌─────┐                ┌─────┐  
   │     │                │     │  
   └─────┘────────────────└─────┘  
```


マスクのデフォルト値はキャンバスの四隅のため、上記のようなデザインにしないと初期位置からドラッグがしにくいためである。

## Spread Sheet Window

本ソフトウェアの特徴的な特性は、複数 Page での横断編集が極めて容易であること。
- UI 上の Spread Sheet には、Microsoft Excel のような格子状の表形式のエディタがあり、複数の Page にまたがる AssetInstance の情報を編集することができる。
- それぞれの行は Page を表し、列は Asset（テンプレート）を表す。
- ある Page で特定の AssetInstance を作成した場合、セルに元となった Asset の列が表示される。
- ページ管理機能が統合されており、従来の独立したPageListコンポーネントは不要になった。
- 例えば
  - Asset Window に画像ファイルをドロップして、「My Girl」という ImageAsset を作成
  - 「My Girl」をSpread Sheet にドロップする
  - すると、My Girl の列が Spread Sheet に追加される。
  - 各セルにはチェックボックスが表示され、チェックを入れることで AssetInstance を Page 上に配置することができる。
  - また、チェックボックス以外のセル内部の場所をクリックすることで、AssetInstance の個別設定（位置のオーバーライド、AssetAttr参照の変更、透明度調整など）を行うためのウィンドウがモーダルとして表示される
  - 列のタイトルをクリックすることで、Excel のように、列全体を選択することができる
  - 列のタイトルを右クリックすることで、非表示にすることができる。例えば背景画像など、常に表示して編集する必要がない場合は、非表示にしておくことができる。
  - 列をドラッグすることで、列の順番を変更することができる。
  - [+] ボタンをクリックすることで、新たにページを追加することができる。
  - Preview の列には各ページのプレビューが表示される。プレビューは、ページの内容を確認するためのもので、クリックすることで Preview Window でそのページが表示される。
  - `#` の列には、ページの番号が表示される。
  - ページの順番は、Spread Sheet 上でドラッグアンドドロップで変更することができる。
  - `#` の列の横にある `[x]` ボタンをクリックすることで、そのページを削除することができる。UI上はXボタンのように表示される。
  - **スクロール機能**：多数のページ・アセットがある場合は縦・横スクロールバーが表示される
  - **パン機能**：マウス中ボタン（ホイールボタン）を押しながらドラッグすることで自由自在にパン操作が可能
  - 各セルにある `[✔]` はチェックボックスで、その AssetInstance の表示の ON/OFF を切り替えらえっる。
  - 各セルにある `[%]` は編集ボタンで、そのボタンをクリックするとモーダルウィンドウが表示され、AssetInstance の個別設定を行うことができる。
    - 実際に `[%]` は本ドキュメントで便宜上表記しているもので、実際の UI では `🖊️` のようなペンのアイコンが表示される。

```
     #  Preview  My Girl        Background       Girls Speech     Effect
   ┌───┬──────┬────────────────┬────────────────┬────────────────┬────────────────┐
   │   │      │ [✔] |          │ [✔] |          │ [✔] |          │ [✔] |          │
[x]│ 1 │      │ [%] |          │ [%] |          │ [%] |          │ [%] |          │
   │   │      │     |          │     |          │     |          │     |          │
   ├───┼──────┼────────────────┼────────────────┼────────────────┼────────────────┤
   │   │      │ [✔] |          │ [✔] |          │ [✔] |          │ [✔] |          │
[x]│ 2 │      │ [%] |          │ [%] |          │ [%] |          │ [%] |          │
   │   │      │     |          │     |          │     |          │     |          │
   ├───┼──────┼────────────────┼────────────────┼────────────────┼────────────────┤
   │   │      │ [✔] |          │ [✔] |          │ [✔] |          │ [✔] |          │
[x]│ 3 │      │ [%] |          │ [%] |          │ [%] |          │ [%] |          │
   │   │      │     |          │     |          │     |          │     |          │
   ├───┼──────┼────────────────┼────────────────┼────────────────┼────────────────┤
   │   │      │ [✔] |          │ [✔] |          │ [✔] |          │ [✔] |          │
[x]│ 4 │      │ [%] |          │ [%] |          │ [%] |          │ [%] |          │
   │   │      │     |          │     |          │     |          │     |          │
   ├───┴──────┴────────────────┴────────────────┴────────────────┴────────────────┤
   │                                      [+]                                     │
   └──────────────────────────────────────────────────────────────────────────────┘
```


## Cell

それぞれのセルは、以下のようなレイアウトになっている。
左右に範囲が別れており、左右の領域が線で分割されている。
左側を cell-manage と呼ぶ
右側を cell-preview と呼ぶ。

- cell-manage にはチェックボックスと編集ボタンが縦に並んでいる。
- cell-content には、AssetInstance の種類ごとに内容が異なる領域。
- 基本的にはその AssetInstance の概要が表示される。
- セルの右上には右上のセルの頂点に内接する三角形が描画される `＼` は三角形の底辺を表す。実際の画面上は内接するように青い三角形が描画される。
  - この三角形は、そのセルが表す Asset の内容が AssetInstance 側で override されていることを示す。もしひとつでも Asset の属性が AssetInstance 側でオーバーライドされている場合は、この三角形が表示される。

```
cell-manage <- -> cell-content
        ┌────────────────┐
        │ [✔] |        ＼│
        │ [%] |          │
        │     |          │
        └────────────────┘
```

ImageAssetInstance の場合、cell-content にはその画像の小さなプレビューが表示される。

```
┌────────────────┐
│ [✔] |  ┌────┐  │
│ [%] |  │    │  │
│     |  └────┘  │
└────────────────┘
```

TextAssetInstance の場合、cell-content にはその Asset のテキスト (default_text ないし override_text) が表示される。SVG ではなくプレーンテキストで表示される。

```
┌────────────────┐
│ [✔] |HELLO     │
│ [%] |WORLD     │
│     |          │
└────────────────┘
```

## Column

列のヘッダ部分を右クリックするとメニューが出現し、その列全体に対してバルク操作を行うことができる。
右クリックを開いている間、その列全体はハイライトされ、どの列に対して操作を行うかがわかりやすくなっている。
例えば、以下の例で、Background と書いてあるあたりを右クリックする

```
...+----------------+...
...| Background     |...
...┬────────────────┬...
...│ [✔] |          │...
...│ [%] |          │...
...│     |          │...
...┼────────────────┼...
...│ [✔] |          │...
...│ [%] |          │...
...│     |          │...
...┼────────────────┼...
...│ [✔] |          │...
...│ [%] |          │...
...│     |          │...
...┴────────────────┴...
```

と、ImageAsset の場合は以下のメニューが表示される。

- 全て表示
   ... 列の全てのセルに対してチェックボックスを ON にする
- 全て隠す
   ... 列の全てのセルに対してチェックボックスを OFF にする
- 全て変更リセット
   ... 列の全てのセルに対して個別設定をリセットする（Asset のデフォルト値に戻すため、AssetInstance の overwrite_... の属性は全て undefined になる）


### AssetInstance編集画面

cell-manage の `[%]` をクリックすると、そのAssetInstanceの個別設定を行うためのモーダルウィンドウが表示される。このウィンドウでは、元となるAssetのデフォルト値やAssetAttr参照を個別にオーバーライドすることができる。

#### ImageAssetInstance編集画面

```
      ┌───────────────────────────────────────────────────────────┐
      │ Background - Page 1                                       │
      ├───────────────────────────────────────────────────────────┤
      │                                                           │
      │                                                           │
      │                                                           │
      │                                                           │
      │                                                           │
      │   ┌─────────────────────┐       Original Width/Height     │
      │   │    Image Preview    │           ┌───────┐┌───────┐    │
      │   │                     │           │  100  ││   200 │    │
      │   │   o------------o    │           └───────┘└───────┘    │
      │   │   |            |    │       Default Width/Height      │
      │   │   |            |    │     [ ] 縦横比を元画像にあわせる│
      │   │   o------------o    │           ┌───────┐┌───────┐    │
      │   │                     │           │       ││       │    │
      │   │                     │           └───────┘└───────┘    │
      │   │                     │         Default PosX/PosY       │
      │   └─────────────────────┘           ┌───────┐┌───────┐    │
      │                                     │       ││       │    │
      │                                     └───────┘└───────┘    │
      │                                   Default Opacity         │
      │                                     o─[]────────────o     │
      │                                   Edit Mask [🖊️]          │
      └───────────────────────────────────────────────────────────┘
```

ペンのマークをクリックすると、下のマスク編集画面が開く。

マスク編集:
```
      ┌───────────────────────────────────────────────────────────┐
      │ Background - Page 1                                       │
      ├───────────────────────────────────────────────────────────┤
      │                                 Default Mask              │
      │    ┌─────────────────────┐      ┌───────┐      ┌───────┐  │
      │    │    Image Preview    │  P1:x│       │ P1:y │       │  │
      │    │                     │      └───────┘      └───────┘  │
      │    │   0------------0    │      ┌───────┐      ┌───────┐  │
      │    │   |            |    │  P2:x│       │ P2:y │       │  │
      │    │   |            |    │      └───────┘      └───────┘  │
      │    │   0------------0    │      ┌───────┐      ┌───────┐  │
      │    │                     │  P3:x│       │ P3:y │       │  │
      │    │                     │      └───────┘      └───────┘  │
      │    │                     │      ┌───────┐      ┌───────┐  │
      │    └─────────────────────┘  P4:x│       │ P4:y │       │  │
      │                                 └───────┘      └───────┘  │
      │                                                           │
      │                                Exit Mask Editor [<-]      │
      │                                                           │
      └───────────────────────────────────────────────────────────┘
```

基本的には ImageAsset の編集画面と同様の内容。


#### TextAssetInstance編集画面

左側の text-preview には SVG で描画されたテキストが表示される。
SVG の描画方法については、svg-structure.md を参照。
text-input には、直接テキストボックスがあり、複数行の入力が可能になっている。

Font はプルダウンボックスになっており、フォントが選択できる。
`[v]` はドロップダウンメニューを開くためのアイコンである。実際は三角形の頂点が下を向いているアイコンが表示される。

Font Size、Stroke Width、PosX、PosY、Leading、Rotate、Z-Index はそれぞれの設定値を入力するための項目である。
マイナス値は許容されず、正の整数値のみが許容される。
Opacity はスライダーで調整することができ、0から100までの値を設定することができる。
Vertical Writing はチェックボックスで、チェックを入れると縦書きのテキストが表示される。

Color Stroke、Color はそれぞれの色を選択するための項目で、カラーピッカーが表示される。
`[/]` はカラーピッカーを開くためのアイコンである。

`[Save]` ボタンは、設定を保存するためのボタンである。

```
    ┌────────────────────────────────────────────────────────────┐
    │ Girls Speech - Page 1                                  [x] │
    ├────────────────────────────────────────────────────────────┤
    │                              |                             │
    │  text-preview                | text-input                  │
    │ ┌─────────────────────────┐  | ┌─────────────────────────┐ │
    │ │                    H    │  | │ HELLO                   │ │
    │ │                W   E    │  | │ WORLD                   │ │
    │ │                O   L    │  | │                         │ │
    │ │                R   L    │  | │                         │ │
    │ │                L   O    │  | │                         │ │
    │ │                D        │  | │                         │ │
    │ │                         │  | │                         │ │
    │ └─────────────────────────┘  | └─────────────────────────┘ │
    │                              |                             │
    │                              |         ┌───────────┐       │
    │                              |  Font : │  Default  │ [v]   │
    │                              |         └───────────┘       │
    │                              |               ┌─────┐       │
    │                              |    Font Size :│     │       │
    │                              |               └─────┘       │
    │                              |               ┌─────┐       │
    │                              | Stroke Width :│     │       │
    │                              |               └─────┘       │
    │                              |    PosX   : PosY            │
    │                              |   ┌─────┐  ┌─────┐          │
    │                              |   └─────┘  └─────┘          │
    │                              | Color Stroke:               │
    │                              |   ┌───────────────┐         │
    │                              |   │ #FFFFFF       │ [/]     │
    │                              |   └───────────────┘         │
    │                              | Color:                      │
    │                              |   ┌───────────────┐         │
    │                              |   │ #FFFFFF       │ [/]     │
    │                              |   └───────────────┘         │
    │                              |           ┌────┐            │
    │                              |  Leading: │ 0  │            │
    │                              |           └────┘            │
    │                              |           ┌────┐            │
    │                              |  Rotate:  │ 0  │            │
    │                              |           └────┘            │
    │                              |  Opacity:                   │
    │                              |    o─[]────────────o        │
    │                              |                             │
    │                              |  ☑ Vertical Writing         │
    │                              |           ┌────┐            │
    │                              |  Z-Index: │ 0  │            │
    │                              |           └────┘            │
    │                              |                             │
    │                              |          [Save]             │
    └────────────────────────────────────────────────────────────┘
```

## Preview Window

  - Page の内容を確認するためのウィンドウ。Page がどのように見えるかを確認することができる。
  - Preview Window は、複数ページを横断的に確認できる。
  - ⌘ + マウスホイールで page の大きさが変更できる。
  - パネルの表示/非表示切り替えボタンを備えている
  - キャンバスサイズに合わせた実際のサイズ表示とスクロール機能を提供

### Preview Controls

プレビューウィンドウのヘッダーには以下のコントロールが配置されている：

- **ズームスライダー**：0.1倍から3.0倍まで段階的にズーム調整可能
- **フィットボタン**：キャンバス全体をプレビュー画面に収める（自動ズーム・中央配置）
  - ズームスライダーの横にはフィットボタンが有る。
  - 図には `[-@-]` というアイコンがあるが、実際は四角形が二重になり、内側の四角形の四方向から線が外側の四角形に内接しているデザインをしている。
- **ページ情報**：現在のページ番号、アセット数、キャンバスサイズを表示

### Navigation Features

- **スクロール操作**：キャンバスが大きい場合は自動的にスクロールバーが表示
- **パン操作**：マウス中ボタン（ホイールボタン）を押しながらドラッグで自由移動
- **ズーム操作**：⌘キー + マウスホイールで拡大・縮小

```
   ┌─────────────────────────────────────────────────────────────┐
   │  Preview                                                    │
   │  倍率:  o─[]────────────o 100%  [-@-]                       │
   │                              Page N: Assets:N  NNNxNNN px   │
   ├─────────────────────────────────────────────────────────────┤
   │                                                          ┌─┐│
   │                                                          │ ││
   │                                                          │ ││
   │                                                          │ ││
   │            ┌─────────────────────┐                       │ ││
   │            │                     │                       │ ││
   │            │                     │                       │ ││
   │            │                     │                       │ ││
   │            │                     │                       │ ││
   │            │                     │                       │ ││
   │            │   page content      │                       │ ││
   │            │                     │                       │ ││
   │            │                     │                       │ ││
   │            │                     │                       │ ││
   │            └─────────────────────┘                       │ ││
   │                                                          │ ││
   │                                                          │ ┼┼─────┐
   │                                                          │ ││     │
   │                                                          │ ││   scroll bar
   │                                                          │ ││
   │                                                          └─┘│
   └─────────────────────────────────────────────────────────────┘
```

## Implementation Details

### Technical Architecture
- **状態管理**：Zustand store (`projectStore.ts`) で `showAssetLibrary` と `showPreview` を管理
- **レイアウト**：CSS Grid を使用し、パネル表示状態に応じて動的にカラムを調整
- **アイコン**：SVGコンポーネントとして実装し、React内で再利用可能

### Key Files
- `MainLayout.tsx`：メインレイアウトとパネル切り替えロジック
- `AssetLibrary.tsx`：アセットライブラリコンポーネント（閉じるボタン・スクロール機能含む）
- `PreviewArea.tsx`：プレビューエリアコンポーネント（閉じるボタン・フィット機能・パン操作含む）
- `EnhancedSpreadsheet.tsx`：ページ管理機能が統合されたスプレッドシート（スクロール・パン機能含む）
- `PanelIcons.tsx`：SVGアイコンコンポーネント（FitToViewIcon含む）
- `MainLayout.css`：動的レイアウトスタイル
- `App.css`：共通スクロールバースタイル（.scrollbar-largeクラス）

### macOS Compatibility
- **タイトルバースタイル**：`default` を使用してウィンドウ操作の互換性を確保
- **コンテンツマージン**：システムタイトルバーとの重複を回避するよう調整

### Layout States
1. **フル表示**：全パネル表示 (`grid-template-columns: 280px 1fr 320px`)
2. **Asset非表示**：中央＋Preview (`grid-template-columns: 1fr 320px`)
3. **Preview非表示**：Asset＋中央 (`grid-template-columns: 280px 1fr`)
4. **フルスクリーン**：中央のみ (`grid-template-columns: 1fr`)

### Scrolling & Navigation
- **統一スクロールバー**：`.scrollbar-large`クラスによる一貫したスクロールバースタイル
- **動的表示**：コンテンツが領域を超える場合のみスクロールバーを表示（`overflow-y: auto`）
- **レスポンシブ幅制御**：スプレッドシートは画面幅に応じて動的に最大幅を調整
- **パン操作**：マウス中ボタンによる直感的なナビゲーション（スプレッドシート・プレビュー両対応）
